param(
    [string]$Url,
    [string]$CertPath
)

function Get-DataFromUrl {
    param(
        [string]$Url,
        [string]$CertPath
    )
    
    try {
        # Załadowanie certyfikatu
        $cert = New-Object System.Security.Cryptography.X509Certificates.X509Certificate2 -ArgumentList $CertPath

        # Wywołanie usługi REST przy użyciu metody GET i certyfikatu
        $response = Invoke-RestMethod -Uri $Url -Method Get -Certificate $cert
        
        # Wyświetlanie odpowiedzi
        Write-Output "Odpowiedź z serwera: $($response | ConvertTo-Json)"
    }
    catch {
        # Obsługa błędów i wyświetlanie wiadomości o błędzie
        Write-Error "Błąd: $_"
    }
}

# Wywołanie funkcji z przekazanymi parametrami
Get-DataFromUrl -Url $Url -CertPath $CertPath
